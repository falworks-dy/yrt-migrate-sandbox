# yrt-migrate-sandbox

`yrt-migrate` の動作確認・検証用リポジトリです。


## 使い方

### 1. 依存パッケージのインストール

```sh
yarn install
```

- `yrt-migrate` については `package.json` にて修正後のブランチを指定していますが、
   なんか修正前のが来ることがあるので、なんやかんやしてください。

### 2. マイグレーションの実行

```sh
node main.js
```

- `xml` ディレクトリー内のXMLファイルが変換され、`xml-out` ディレクトリーに出力されます。出力が正しいかを確認してください。
- `main.js` 内で処理対象のフィルタリングができます。
- 注意: `xml-out` ディレクトリーの中身は毎回削除・再生成されます。


## xml ディレクトリーの内容

- 00番台: 不具合（広範囲系、StyleXML全般など）
- 10番台: 不具合（個別属性系）
- 20番台: 不具合（罫線統合系）
- OK: 大丈夫そうな例


## 検証方法 備考

- 構文エラーの確認方法
    - マイグレーション後のXMLにはXMLスキーマ指定用の属性が付与されるようにしたので、VS Code などで開けば、構文エラーは自動的に検出されるはず
- 厳密に確認したいときの方法
    - マイグレーション前後のXMLをそれぞれ core の alpha.13 と 1.0 で処理してみて、PDFの見た目が同じになれば概ねOK
- サンプルとして使えるXML（機能テスト）
    - alpha.13 と 1.0 ともに、core の `test/function_test/` のなかに要素・属性ごとに分かれたものあり。  
     `yarn test func` を実行すればそれぞれのPDFが生成される
    - ただし一部、XMLスキーマに準拠しないデバッグ専用の要素・属性あり：  
      `<DebugBox>`, `preventClip`, `preventNewpage`, `debugBorder`
- 注意事項
    - このリポジトリーでは、XMLファイルを入力とした場合しか検証していません。  
      旧形式のYRTを入力とした場合については別途確認してください。
